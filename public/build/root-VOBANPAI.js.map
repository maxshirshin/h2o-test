{
  "version": 3,
  "sources": ["empty-module:./sessions.server", "browser-route-module:/Users/maximshirshin/src/github.com/maxshirshin/h2o-test/app/root.tsx?browser", "../../app/root.tsx", "../../app/components/navbar.tsx", "../../app/utils/scroll.ts"],
  "sourcesContent": ["module.exports = {};", "export { CatchBoundary, ErrorBoundary, default, links, unstable_shouldReload } from \"/Users/maximshirshin/src/github.com/maxshirshin/h2o-test/app/root.tsx\";", "import type {\n  LinksFunction,\n  LoaderFunction,\n  ShouldReloadFunction,\n} from \"remix\";\nimport {\n  json,\n  Links,\n  LiveReload,\n  Meta,\n  Scripts,\n  Outlet,\n  useCatch,\n  useLoaderData,\n} from \"remix\";\n\nimport Navbar from \"./components/navbar\";\nimport { useScrollRestoration } from \"./utils/scroll\";\nimport { unencryptedSession } from \"./sessions.server\";\n\nimport tailwindStylesUrl from \"./styles/tailwind.css\";\n\nexport let links: LinksFunction = () => {\n  return [{ rel: \"stylesheet\", href: tailwindStylesUrl }];\n};\n\nexport let loader: LoaderFunction = async ({ request }) => {\n  let session = await unencryptedSession.getSession(\n    request.headers.get(\"Cookie\")\n  );\n  let theme = session.get(\"theme\") || \"dark\";\n\n  return json({ theme });\n};\n\nexport let unstable_shouldReload: ShouldReloadFunction = ({ submission }) => {\n  return !!submission && submission.action === \"/themes\";\n};\n\nfunction Document({\n  children,\n  title,\n  theme,\n}: {\n  children: React.ReactNode;\n  title?: string;\n  theme?: string;\n}) {\n  useScrollRestoration();\n\n  return (\n    <html lang=\"en\" data-theme={theme || \"dark\"}>\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"icon\" href=\"/favicon.png\" type=\"image/png\" />\n        {title ? <title>{title}</title> : null}\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Navbar />\n        {children}\n        <Scripts />\n        {process.env.NODE_ENV === \"development\" && <LiveReload />}\n      </body>\n    </html>\n  );\n}\n\nexport default function App() {\n  let { theme } = useLoaderData();\n\n  return (\n    <Document theme={theme}>\n      <Outlet />\n    </Document>\n  );\n}\n\nexport function CatchBoundary() {\n  let caught = useCatch();\n\n  switch (caught.status) {\n    case 401:\n    case 404:\n      return (\n        <Document title={`${caught.status} ${caught.statusText}`}>\n          <h1>\n            {caught.status} {caught.statusText}\n          </h1>\n        </Document>\n      );\n\n    default:\n      throw new Error(\n        `Unexpected caught response with status: ${caught.status}`\n      );\n  }\n}\n\nexport function ErrorBoundary({ error }: { error: Error }) {\n  console.error(error);\n\n  return (\n    <Document title=\"Uh-oh!\">\n      <h1>App Error</h1>\n      <pre>{error.message}</pre>\n      <p>\n        Replace this UI with what you want users to see when your app throws\n        uncaught errors.\n      </p>\n    </Document>\n  );\n}\n", "import { Link } from \"remix\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function Navbar() {\n  let { pathname } = useLocation();\n\n  return (\n    <div className=\"navbar shadow-lg bg-neutral text-neutral-content\">\n      {pathname !== \"/\" ? (\n        <div className=\"flex-none\">\n          <Link\n            prefetch=\"intent\"\n            to=\"/\"\n            className=\"btn btn-square btn-ghost\"\n            title=\"Go home\"\n          >\n            <svg\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              className=\"inline-block w-6 h-6 stroke-current text-success\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n              ></path>\n            </svg>\n          </Link>\n        </div>\n      ) : null}\n      <div className=\"flex-1 px-2 mx-2\">\n        <span className=\"text-lg font-bold\">Remix + Cloudflare = \u2764\uFE0F</span>\n      </div>\n    </div>\n  );\n}\n", "import * as React from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useTransition } from \"@remix-run/react\";\n\nlet firstRender = true;\n\nconst useSSRLayoutEffect =\n  typeof window === \"undefined\" ? () => {} : React.useLayoutEffect;\n\nif (\n  typeof window !== \"undefined\" &&\n  window.history.scrollRestoration !== \"manual\"\n) {\n  window.history.scrollRestoration = \"manual\";\n}\n\n// shouldn't have to do it this way\n// https://github.com/remix-run/remix/issues/240\ntype LocationState = undefined | { isSubmission: boolean };\nexport function useScrollRestoration(enabled: boolean = true) {\n  const positions = React.useRef<Map<string, number>>(new Map()).current;\n  const location = useLocation();\n  const isSubmission = (location.state as LocationState)?.isSubmission ?? false;\n  const transition = useTransition();\n\n  React.useEffect(() => {\n    if (isSubmission) return;\n    if (transition.state === \"loading\") {\n      positions.set(location.key, window.scrollY);\n    }\n  }, [transition.state, location.key, positions, isSubmission]);\n\n  useSSRLayoutEffect(() => {\n    if (!enabled) return;\n    if (transition.state !== \"idle\") return;\n    if (isSubmission) return;\n    // don't restore scroll on initial render\n    if (firstRender) {\n      firstRender = false;\n      return;\n    }\n    const y = positions.get(location.key);\n    window.scrollTo(0, y ?? 0);\n  }, [transition.state, location.key, positions, isSubmission]);\n}\n\nexport function useElementScrollRestoration(\n  ref: React.MutableRefObject<HTMLElement | null>,\n  enabled: boolean = true\n) {\n  const positions = React.useRef<Map<string, number>>(new Map()).current;\n  const location = useLocation();\n  const transition = useTransition();\n\n  React.useEffect(() => {\n    if (!ref.current) return;\n    if (transition.state === \"loading\") {\n      positions.set(location.key, ref.current.scrollTop);\n    }\n  }, [transition.state, location.key, ref, positions]);\n\n  useSSRLayoutEffect(() => {\n    if (!enabled) return;\n    if (transition.state !== \"idle\") return;\n    if (!ref.current) return;\n    const y = positions.get(location.key);\n    ref.current.scrollTo(0, y ?? 0);\n  }, [transition.state, location.key, positions, ref]);\n}\n"],
  "mappings": "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",
  "names": []
}
